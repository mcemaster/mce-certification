<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MCE 인증기업검색 위젯</title>
</head>
<body>

<!-- ========================================
     MCE 인증기업검색 위젯 - 아임웹용
     아래 코드를 아임웹 HTML 위젯에 복사하세요
======================================== -->

<div id="mce-search-widget">
  <style>
    #mce-search-widget {
      font-family: 'Pretendard', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
      max-width: 100%;
      margin: 0 auto;
      padding: 0;
    }
    
    #mce-search-widget * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    /* 검색 컨테이너 */
    .mce-search-container {
      background: #fafafa;
      border: 1px solid #e8e8e8;
      padding: 35px 30px;
    }
    
    /* 타이틀 */
    .mce-search-title {
      text-align: center;
      margin-bottom: 25px;
    }
    
    .mce-search-title h2 {
      font-size: 22px;
      font-weight: 600;
      color: #2c2c2c;
      margin-bottom: 6px;
      letter-spacing: -0.5px;
    }
    
    .mce-search-title p {
      font-size: 13px;
      color: #888;
      font-weight: 400;
    }
    
    /* 검색 폼 */
    .mce-search-form {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .mce-form-row {
      display: flex;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .mce-form-group {
      flex: 1;
    }
    
    .mce-form-group label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: #555;
      margin-bottom: 6px;
    }
    
    .mce-form-group input {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid #ddd;
      background: #fff;
      font-size: 14px;
      color: #333;
      transition: border-color 0.2s, box-shadow 0.2s;
      outline: none;
    }
    
    .mce-form-group input:focus {
      border-color: #555;
      box-shadow: 0 0 0 3px rgba(0,0,0,0.05);
    }
    
    .mce-form-group input::placeholder {
      color: #aaa;
    }
    
    /* Turnstile 영역 */
    .mce-captcha-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .mce-captcha-wrap {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .mce-captcha-status {
      font-size: 13px;
      color: #888;
    }
    
    .mce-captcha-status.ok {
      color: #4a9f4a;
      font-weight: 500;
    }
    
    /* 검색 버튼 */
    .mce-btn-search {
      background: #3a3a3a;
      color: #fff;
      border: none;
      padding: 13px 40px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s;
      letter-spacing: 0.5px;
    }
    
    .mce-btn-search:hover {
      background: #2a2a2a;
    }
    
    .mce-btn-search:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    
    /* 안내문구 */
    .mce-notice {
      max-width: 600px;
      margin: 20px auto 0;
      padding: 18px 20px;
      background: #fff;
      border: 1px solid #e8e8e8;
    }
    
    .mce-notice-title {
      font-size: 13px;
      font-weight: 600;
      color: #666;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .mce-notice-title::before {
      content: "";
      display: inline-block;
      width: 4px;
      height: 4px;
      background: #888;
      border-radius: 50%;
    }
    
    .mce-notice-list {
      list-style: none;
    }
    
    .mce-notice-list li {
      font-size: 12px;
      color: #777;
      line-height: 1.7;
      padding-left: 12px;
      position: relative;
      margin-bottom: 4px;
    }
    
    .mce-notice-list li::before {
      content: "-";
      position: absolute;
      left: 0;
      color: #aaa;
    }
    
    .mce-notice-list li .en {
      color: #999;
      font-size: 11px;
    }
    
    /* 에러 메시지 */
    .mce-error {
      display: none;
      max-width: 600px;
      margin: 15px auto 0;
      padding: 12px 15px;
      background: #fff5f5;
      border: 1px solid #ffdddd;
      color: #c44;
      font-size: 13px;
      text-align: center;
    }
    
    .mce-error.show {
      display: block;
    }
    
    /* 반응형 */
    @media (max-width: 600px) {
      .mce-search-container {
        padding: 25px 20px;
      }
      
      .mce-form-row {
        flex-direction: column;
      }
      
      .mce-captcha-row {
        flex-direction: column;
        align-items: stretch;
      }
      
      .mce-btn-search {
        width: 100%;
      }
    }
  </style>
  
  <div class="mce-search-container">
    <!-- 타이틀 -->
    <div class="mce-search-title">
      <h2>인증기업검색</h2>
      <p>Search for Certified Organizations</p>
    </div>
    
    <!-- 검색 폼 -->
    <form class="mce-search-form" onsubmit="mceDoSearch(event)">
      <div class="mce-form-row">
        <div class="mce-form-group">
          <label>기업명 <span style="color:#999;font-weight:400;">(Company Name)</span></label>
          <input type="text" id="mceCompanyName" placeholder="인증기업명을 입력하세요">
        </div>
        <div class="mce-form-group">
          <label>인증번호 <span style="color:#999;font-weight:400;">(Certificate No.)</span></label>
          <input type="text" id="mceCertNumber" placeholder="인증번호를 입력하세요">
        </div>
      </div>
      
      <div class="mce-captcha-row">
        <div class="mce-captcha-wrap">
          <div class="cf-turnstile" 
               data-sitekey="0x4AAAAAACLk4_UJ4jN7_9fB"
               data-callback="mceOnCaptchaOk"
               data-expired-callback="mceOnCaptchaFail"
               data-theme="light">
          </div>
          <span id="mceCaptchaStatus" class="mce-captcha-status">자동입력방지 인증 필요</span>
        </div>
        <button type="submit" id="mceBtnSearch" class="mce-btn-search" disabled>검 색</button>
      </div>
    </form>
    
    <!-- 에러 메시지 -->
    <div id="mceError" class="mce-error"></div>
    
    <!-- 안내문구 -->
    <div class="mce-notice">
      <div class="mce-notice-title">안내사항 (Notice)</div>
      <ul class="mce-notice-list">
        <li>인증서에 명시된 기업명과 인증번호를 정확히 입력해주세요.</li>
        <li>검색 결과는 MCE 경영인증평가원의 인증 데이터를 기반으로 합니다.</li>
        <li>인증서 유효성 확인 및 상세 문의는 MCE 경영인증평가원으로 연락해주세요.</li>
      </ul>
    </div>
  </div>
  
  <!-- Turnstile 스크립트 -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
  
  <script>
    var mceCaptchaToken = '';
    
    function mceOnCaptchaOk(token) {
      mceCaptchaToken = token;
      document.getElementById('mceCaptchaStatus').textContent = '✓ 인증완료';
      document.getElementById('mceCaptchaStatus').className = 'mce-captcha-status ok';
      document.getElementById('mceBtnSearch').disabled = false;
    }
    
    function mceOnCaptchaFail() {
      mceCaptchaToken = '';
      document.getElementById('mceCaptchaStatus').textContent = '인증 만료';
      document.getElementById('mceCaptchaStatus').className = 'mce-captcha-status';
      document.getElementById('mceBtnSearch').disabled = true;
    }
    
    function mceShowError(msg) {
      var el = document.getElementById('mceError');
      el.textContent = msg;
      el.className = 'mce-error show';
    }
    
    function mceHideError() {
      document.getElementById('mceError').className = 'mce-error';
    }
    
    function mceDoSearch(e) {
      e.preventDefault();
      mceHideError();
      
      var company = document.getElementById('mceCompanyName').value.trim();
      var certNo = document.getElementById('mceCertNumber').value.trim();
      
      if (!company && !certNo) {
        mceShowError('기업명 또는 인증번호를 입력해주세요.');
        return;
      }
      
      if (!mceCaptchaToken) {
        mceShowError('자동입력방지 인증을 완료해주세요.');
        return;
      }
      
      // 검색 결과 페이지로 이동 (토큰과 검색어를 URL 파라미터로 전달)
      var searchUrl = 'https://mce-certification.pages.dev/';
      searchUrl += '?company=' + encodeURIComponent(company);
      searchUrl += '&cert=' + encodeURIComponent(certNo);
      searchUrl += '&token=' + encodeURIComponent(mceCaptchaToken);
      searchUrl += '&auto=1';
      
      window.open(searchUrl, '_blank');
    }
  </script>
</div>

<!-- ======================================== -->

</body>
</html>
